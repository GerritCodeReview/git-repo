{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "9e8b7311_90c1c7b7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1007145
      },
      "writtenOn": "2025-11-10T17:11:46Z",
      "side": 1,
      "message": "so at a high level, i agree using sets makes sense, especially because that\u0027s how they\u0027re treated\n\nmy only semi-reservation is in emitting them in `ToXml`.  i\u0027m a fan of being as \"pass-thru\" as possible, so if someone was maintaining the group order for their own purposes, i\u0027d like to not change it (how this change switches to sorted()).  i think we do that already for project order ?  although i don\u0027t think we do that for attribute order.\n\nnow, if `ToXml` is already significantly transforming the output, i won\u0027t push on this point.",
      "revId": "594de19ad47c8b02c9c4fb7aabadddc1e743dfa5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8742fa42_7358f09a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1135531
      },
      "writtenOn": "2025-11-11T18:29:53Z",
      "side": 1,
      "message": "Getting readable output from `repo manifest` was one of the main reasons behind this and the preceding commit. Here is an example of what the output looks like for one project with the current manifests I am working on without these commits applied:\n```\n  \u003cproject name\u003d\"mirrors/git.openembedded.org/meta-openembedded\" path\u003d\"repos/meta-openembedded\" revision\u003d\"walnascar\" groups\u003d\"notdefault,meta-openembedded,meta-oe,default,default,meta-oe,meta-networking,meta-filesystems,default,meta-networking,meta-filesystems,default,meta-oe,meta-python,meta-networking,meta-filesystems,default,meta-python,meta-networking,meta-filesystems,default,meta-python,meta-networking,meta-filesystems,default,meta-networking,meta-filesystems,default,meta-networking,meta-filesystems,default,meta-filesystems,default,meta-oe,meta-filesystems,default,meta-filesystems,default,meta-filesystems,default,meta-filesystems,default,meta-oe,meta-multimedia,default,meta-multimedia,default,meta-oe,meta-python,meta-multimedia,default,meta-python,meta-multimedia,default,meta-python,meta-multimedia,default,meta-multimedia,default,meta-multimedia,default,default,meta-oe,meta-networking,default,meta-networking,default,meta-oe,meta-python,meta-networking,default,meta-python,meta-networking,default,meta-python,meta-networking,default,meta-networking,default,meta-networking,default,default,meta-oe,meta-python,default,meta-python,default,meta-python,default,default,meta-oe,meta-webserver,default,meta-webserver,default,meta-webserver,default,default,meta-oe,meta-networking,meta-filesystems,meta-virtualization,meta-networking,meta-filesystems,meta-virtualization,meta-oe,meta-python,meta-networking,meta-filesystems,meta-virtualization,meta-python,meta-networking,meta-filesystems,meta-virtualization,meta-python,meta-networking,meta-filesystems,meta-virtualization,meta-networking,meta-filesystems,meta-virtualization,meta-networking,meta-filesystems,meta-virtualization,meta-filesystems,meta-virtualization,meta-oe,meta-filesystems,meta-virtualization,meta-filesystems,meta-virtualization,meta-filesystems,meta-virtualization,meta-filesystems,meta-virtualization,meta-oe,meta-networking,meta-virtualization,meta-networking,meta-virtualization,meta-oe,meta-python,meta-networking,meta-virtualization,meta-python,meta-networking,meta-virtualization,meta-python,meta-networking,meta-virtualization,meta-networking,meta-virtualization,meta-networking,meta-virtualization,meta-virtualization,meta-oe,meta-virtualization,meta-virtualization,meta-oe,meta-python,meta-virtualization,meta-python,meta-virtualization,meta-python,meta-virtualization,meta-virtualization\"\u003e\n    \u003clinkfile src\u003d\"meta-oe\" dest\u003d\"meta-oe\"/\u003e\n    \u003clinkfile src\u003d\"meta-oe\" dest\u003d\"meta-oe\"/\u003e\n    \u003clinkfile src\u003d\"meta-oe\" dest\u003d\"meta-oe\"/\u003e\n    \u003clinkfile src\u003d\"meta-python\" dest\u003d\"meta-python\"/\u003e\n    \u003clinkfile src\u003d\"meta-networking\" dest\u003d\"meta-networking\"/\u003e\n    \u003clinkfile src\u003d\"meta-oe\" dest\u003d\"meta-oe\"/\u003e\n    \u003clinkfile src\u003d\"meta-filesystems\" dest\u003d\"meta-filesystems\"/\u003e\n    \u003clinkfile src\u003d\"meta-oe\" dest\u003d\"meta-oe\"/\u003e\n    \u003clinkfile src\u003d\"meta-oe\" dest\u003d\"meta-oe\"/\u003e\n    \u003clinkfile src\u003d\"meta-python\" dest\u003d\"meta-python\"/\u003e\n    \u003clinkfile src\u003d\"meta-multimedia\" dest\u003d\"meta-multimedia\"/\u003e\n    \u003clinkfile src\u003d\"meta-oe\" dest\u003d\"meta-oe\"/\u003e\n    \u003clinkfile src\u003d\"meta-oe\" dest\u003d\"meta-oe\"/\u003e\n    \u003clinkfile src\u003d\"meta-python\" dest\u003d\"meta-python\"/\u003e\n    \u003clinkfile src\u003d\"meta-networking\" dest\u003d\"meta-networking\"/\u003e\n    \u003clinkfile src\u003d\"meta-oe\" dest\u003d\"meta-oe\"/\u003e\n    \u003clinkfile src\u003d\"meta-python\" dest\u003d\"meta-python\"/\u003e\n    \u003clinkfile src\u003d\"meta-oe\" dest\u003d\"meta-oe\"/\u003e\n    \u003clinkfile src\u003d\"meta-webserver\" dest\u003d\"meta-webserver\"/\u003e\n    \u003clinkfile src\u003d\"meta-oe\" dest\u003d\"meta-oe\"/\u003e\n    \u003clinkfile src\u003d\"meta-oe\" dest\u003d\"meta-oe\"/\u003e\n    \u003clinkfile src\u003d\"meta-python\" dest\u003d\"meta-python\"/\u003e\n    \u003clinkfile src\u003d\"meta-networking\" dest\u003d\"meta-networking\"/\u003e\n    \u003clinkfile src\u003d\"meta-oe\" dest\u003d\"meta-oe\"/\u003e\n    \u003clinkfile src\u003d\"meta-filesystems\" dest\u003d\"meta-filesystems\"/\u003e\n    \u003clinkfile src\u003d\"meta-oe\" dest\u003d\"meta-oe\"/\u003e\n    \u003clinkfile src\u003d\"meta-oe\" dest\u003d\"meta-oe\"/\u003e\n    \u003clinkfile src\u003d\"meta-python\" dest\u003d\"meta-python\"/\u003e\n    \u003clinkfile src\u003d\"meta-networking\" dest\u003d\"meta-networking\"/\u003e\n    \u003clinkfile src\u003d\"meta-oe\" dest\u003d\"meta-oe\"/\u003e\n    \u003clinkfile src\u003d\"meta-oe\" dest\u003d\"meta-oe\"/\u003e\n    \u003clinkfile src\u003d\"meta-python\" dest\u003d\"meta-python\"/\u003e\n  \u003c/project\u003e\n```\nAnd here is the same project with my commits applied:\n```\n  \u003cproject name\u003d\"mirrors/git.openembedded.org/meta-openembedded\" path\u003d\"repos/meta-openembedded\" revision\u003d\"walnascar\" groups\u003d\"default,meta-filesystems,meta-multimedia,meta-networking,meta-oe,meta-openembedded,meta-python,meta-virtualization,meta-webserver,notdefault\"\u003e\n    \u003clinkfile src\u003d\"meta-networking\" dest\u003d\"meta-networking\"/\u003e\n    \u003clinkfile src\u003d\"meta-multimedia\" dest\u003d\"meta-multimedia\"/\u003e\n    \u003clinkfile src\u003d\"meta-python\" dest\u003d\"meta-python\"/\u003e\n    \u003clinkfile src\u003d\"meta-webserver\" dest\u003d\"meta-webserver\"/\u003e\n    \u003clinkfile src\u003d\"meta-oe\" dest\u003d\"meta-oe\"/\u003e\n    \u003clinkfile src\u003d\"meta-filesystems\" dest\u003d\"meta-filesystems\"/\u003e\n  \u003c/project\u003e\n```\nEspecially using sets to maintain the groups helps a long way as otherwise the list just contains the same groups over and over again.\n\nAs for using `sorted()`, I just thought that made sense to make sure to generate a consistent output. I have no strong feelings about it though.",
      "parentUuid": "9e8b7311_90c1c7b7",
      "revId": "594de19ad47c8b02c9c4fb7aabadddc1e743dfa5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8a1d8e4c_afe9a6e6",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1007145
      },
      "writtenOn": "2025-11-11T18:38:06Z",
      "side": 1,
      "message": "\"readable\" is very subjective as to what level things should be processed.  `repo manifest` is the sort of tool that should be a \"pass-thru\" as much as possible (\"reasonable\" effort).  it shouldn\u0027t be considered a formatter tool.  but these are general principles, and i wouldn\u0027t require a lot of extra or expensive code just to maintain that.\n\nto your example, i would think the \"correct\" output would be deduping while maintaining order.\n\nalong those lines, double check the processing order.  iirc, we don\u0027t run these in parallel.  we collect them into a list that matches the order they were declared, and then we process them in the same order.  someone could write a linkfile/copyfile where one step depends on the previous one.  sorting would break that.\n\nglancing at the manifest spec, we don\u0027t state one way or the other.  so we should nail that down in the docs to avoid ambiguity.",
      "parentUuid": "8742fa42_7358f09a",
      "revId": "594de19ad47c8b02c9c4fb7aabadddc1e743dfa5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2359c8cc_7716bb8c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1135531
      },
      "writtenOn": "2025-11-11T20:53:37Z",
      "side": 1,
      "message": "I have changed the code to use dicts rather than sets to store the `copyfile` and `linkfile` elements. That should maintain the order they are specified in the manifest.",
      "parentUuid": "8a1d8e4c_afe9a6e6",
      "revId": "594de19ad47c8b02c9c4fb7aabadddc1e743dfa5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "db495cac_515951ad",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 1007145
      },
      "writtenOn": "2025-11-12T15:43:24Z",
      "side": 1,
      "message": "is using a dict for manifest groups too onerous ?  i grok it\u0027s not as clean when it comes to insertion/update as sets, but the test/\"is member\" operations are the same.",
      "parentUuid": "2359c8cc_7716bb8c",
      "revId": "594de19ad47c8b02c9c4fb7aabadddc1e743dfa5",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}