{
  "comments": [
    {
      "key": {
        "uuid": "b0db3405_f0062041",
        "filename": "project.py",
        "patchSetId": 1
      },
      "lineNbr": 1308,
      "author": {
        "id": 1017653
      },
      "writtenOn": "2014-10-02T20:59:16Z",
      "side": 1,
      "message": "This adds unconditionally prefix \"refs/heads/\".\n\nBut, what if self.revisionExpr were a short version of tag or SHA1?\n\nI think you need to use:\ngit ls-remote -h \u003crepository\u003e branch.merge\nand\ngit ls-remote -t \u003crepository\u003e branch.merge\n\nto find out whether it is a branch head, tag, or something else.",
      "range": {
        "startLine": 1308,
        "startChar": 10,
        "endLine": 1308,
        "endChar": 47
      },
      "revId": "5e17ae6a83ba6f735ff183c8dd24d6234efd9611",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d0d6e8da_319fd06c",
        "filename": "project.py",
        "patchSetId": 1
      },
      "lineNbr": 1308,
      "author": {
        "id": 1006257
      },
      "writtenOn": "2014-10-03T01:32:31Z",
      "side": 1,
      "message": "\u003e But, what if self.revisionExpr were a short version of tag or SHA1?\n\nIt turns out the code assumes in tons of places that no one uses short versions of a tags.  Just try creating a small manifest with one.  You won\u0027t be able to sync (unless there is a branch of the same name.).\n\nAlso this code is only run if it\u0027s not a sha1 (1303).",
      "parentUuid": "b0db3405_f0062041",
      "range": {
        "startLine": 1308,
        "startChar": 10,
        "endLine": 1308,
        "endChar": 47
      },
      "revId": "5e17ae6a83ba6f735ff183c8dd24d6234efd9611",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d0d6e8da_91247ca5",
        "filename": "project.py",
        "patchSetId": 1
      },
      "lineNbr": 1308,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2014-10-03T15:40:58Z",
      "side": 1,
      "message": "This\u0027ll do badly with what I\u0027m trying to do in my change (non refs/tags/ or refs/heads/ refs). Can you do something like this instead?\n\n if not branch.merge.startswith(\u0027refs/\u0027):\n   branch.merge \u003d R_HEADS + branch.merge",
      "parentUuid": "d0d6e8da_319fd06c",
      "range": {
        "startLine": 1308,
        "startChar": 10,
        "endLine": 1308,
        "endChar": 47
      },
      "revId": "5e17ae6a83ba6f735ff183c8dd24d6234efd9611",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0db3405_f034e000",
        "filename": "project.py",
        "patchSetId": 1
      },
      "lineNbr": 1308,
      "author": {
        "id": 1017653
      },
      "writtenOn": "2014-10-03T17:23:45Z",
      "side": 1,
      "message": "OK, fine. Short branch names are probably the most common use case anyways, so this is definitely a welcome fix for that.",
      "parentUuid": "d0d6e8da_319fd06c",
      "range": {
        "startLine": 1308,
        "startChar": 10,
        "endLine": 1308,
        "endChar": 47
      },
      "revId": "5e17ae6a83ba6f735ff183c8dd24d6234efd9611",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "90571041_f731a00e",
        "filename": "project.py",
        "patchSetId": 1
      },
      "lineNbr": 1308,
      "author": {
        "id": 1017653
      },
      "writtenOn": "2014-10-03T17:23:45Z",
      "side": 1,
      "message": "Nasser, what is the case that you are trying to support? Can you give an example?",
      "parentUuid": "d0d6e8da_91247ca5",
      "range": {
        "startLine": 1308,
        "startChar": 10,
        "endLine": 1308,
        "endChar": 47
      },
      "revId": "5e17ae6a83ba6f735ff183c8dd24d6234efd9611",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d0d6e8da_713318ec",
        "filename": "project.py",
        "patchSetId": 1
      },
      "lineNbr": 1308,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2014-10-03T17:31:48Z",
      "side": 1,
      "message": "Sorry, see https://gerrit-review.googlesource.com/#/c/60310/\n\nAn example would be a project that specifies \"revision\u003d\u003csome sha-1 hash\u003e\" and \"upstream\u003drefs/sandbox/nasserg/devbranch\". Without my changes that doesn\u0027t work (and neither does something like \u0027repo init -b refs/sandbox/nasserg/dev-manifest-branch\u0027).",
      "parentUuid": "b0db3405_f034e000",
      "range": {
        "startLine": 1308,
        "startChar": 10,
        "endLine": 1308,
        "endChar": 47
      },
      "revId": "5e17ae6a83ba6f735ff183c8dd24d6234efd9611",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "90571041_777590bd",
        "filename": "project.py",
        "patchSetId": 1
      },
      "lineNbr": 1308,
      "author": {
        "id": 1017653
      },
      "writtenOn": "2014-10-03T18:14:15Z",
      "side": 1,
      "message": "OK, thanks.\n\nSo, in addition to this one, there are two other related changes:\nhttps://gerrit-review.googlesource.com/#/c/60310\nhttps://gerrit-review.googlesource.com/#/c/60550\n\nIn both, I see code:\nif not branch.startswith(\u0027refs/\u0027):\n  branch \u003d R_HEADS + branch\n\nI\u0027ll let you guys sort this out.",
      "parentUuid": "d0d6e8da_713318ec",
      "range": {
        "startLine": 1308,
        "startChar": 10,
        "endLine": 1308,
        "endChar": 47
      },
      "revId": "5e17ae6a83ba6f735ff183c8dd24d6234efd9611",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b0db3405_90031430",
        "filename": "project.py",
        "patchSetId": 1
      },
      "lineNbr": 1379,
      "author": {
        "id": 1017653
      },
      "writtenOn": "2014-10-02T20:59:16Z",
      "side": 1,
      "message": "Same here.",
      "range": {
        "startLine": 1379,
        "startChar": 8,
        "endLine": 1379,
        "endChar": 50
      },
      "revId": "5e17ae6a83ba6f735ff183c8dd24d6234efd9611",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f0d12ce3_329fd06c",
        "filename": "project.py",
        "patchSetId": 1
      },
      "lineNbr": 1379,
      "author": {
        "id": 1006257
      },
      "writtenOn": "2014-10-03T01:32:31Z",
      "side": 1,
      "message": "This operates on manifest revisions, where sha1s aren\u0027t allowed.",
      "parentUuid": "b0db3405_90031430",
      "range": {
        "startLine": 1379,
        "startChar": 8,
        "endLine": 1379,
        "endChar": 50
      },
      "revId": "5e17ae6a83ba6f735ff183c8dd24d6234efd9611",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f0d12ce3_f2170836",
        "filename": "project.py",
        "patchSetId": 1
      },
      "lineNbr": 1379,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2014-10-03T15:40:58Z",
      "side": 1,
      "message": "Same comment as above.",
      "parentUuid": "f0d12ce3_329fd06c",
      "range": {
        "startLine": 1379,
        "startChar": 8,
        "endLine": 1379,
        "endChar": 50
      },
      "revId": "5e17ae6a83ba6f735ff183c8dd24d6234efd9611",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}