{
  "comments": [
    {
      "key": {
        "uuid": "AAABEn//6Mg\u003d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 10,
      "author": {
        "id": 1006214
      },
      "writtenOn": "2011-08-22T13:18:26Z",
      "side": 1,
      "message": "Overlong line. Please confine commit message lines to less than ~70 characters.",
      "revId": "607baecc98524fa612f6ef979fedc806c04eaabf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAABEn//6Mk\u003d",
        "filename": "subcmds/upload.py",
        "patchSetId": 1
      },
      "lineNbr": 193,
      "author": {
        "id": 1006214
      },
      "writtenOn": "2011-08-22T13:18:26Z",
      "side": 1,
      "message": "This is unnecessarily complicated and can be accomplished with a simple list comprehension:\n\n script \u003d [s.encode(\u0027utf-8\u0027) for s in script]\n\nNote that encode() works for regular strings too, so the \"type(...) is unicode\" conditional is unnecessary.",
      "revId": "607baecc98524fa612f6ef979fedc806c04eaabf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAABEn//5/c\u003d",
        "filename": "subcmds/upload.py",
        "patchSetId": 1
      },
      "lineNbr": 193,
      "author": {
        "id": 1006869
      },
      "writtenOn": "2011-08-23T03:52:34Z",
      "side": 1,
      "message": "I tested on python 2.6.5:\n    script \u003d [s.encode(\u0027utf-8\u0027) for s in script]\nUnicodeDecodeError: \u0027ascii\u0027 codec can\u0027t decode byte 0xe6 in position 19: ordinal not in range(128)\n\nMaybe str has no encode() function, so it decode to unicode first.when decode using ascii, UnicodeDecodeError raised.\n\nI want to find a oneline solution, but this doesn\u0027t work:\nscript \u003d [s.encode(\u0027utf-8\u0027) for s in script if type(s) is unicode]\nIt filters some strings out.\n\nAny suggestions? Thanks!",
      "parentUuid": "AAABEn//6Mk\u003d",
      "revId": "607baecc98524fa612f6ef979fedc806c04eaabf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAABEn//5+o\u003d",
        "filename": "subcmds/upload.py",
        "patchSetId": 1
      },
      "lineNbr": 193,
      "author": {
        "id": 1006869
      },
      "writtenOn": "2011-08-23T06:53:49Z",
      "side": 1,
      "message": "I found it:\nscript\u003dmap(lambda x:x.encode(\u0027utf-8\u0027) if (type(x) is unicode) else x,script)\n\nHow about this one line solution?",
      "parentUuid": "AAABEn//6Mk\u003d",
      "revId": "607baecc98524fa612f6ef979fedc806c04eaabf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAABEn//5v4\u003d",
        "filename": "subcmds/upload.py",
        "patchSetId": 1
      },
      "lineNbr": 193,
      "author": {
        "id": 1006869
      },
      "writtenOn": "2011-08-24T07:47:35Z",
      "side": 1,
      "message": "I want to use this solution:\nscript \u003d [x.encode(\u0027utf-8\u0027) if issubclass(type(x), unicode) else x for x in script]\n\nit works ok on python 2.6.5.",
      "parentUuid": "AAABEn//6Mk\u003d",
      "revId": "607baecc98524fa612f6ef979fedc806c04eaabf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAABE3///DY\u003d",
        "filename": "subcmds/upload.py",
        "patchSetId": 1
      },
      "lineNbr": 193,
      "author": {
        "id": 1006214
      },
      "writtenOn": "2011-08-30T18:18:15Z",
      "side": 1,
      "message": "You\u0027re right, apologies. The code I suggested only works if the input string conforms to ASCII (in which case the UTF-8 recoding is a no-op).",
      "parentUuid": "AAABEn//5v4\u003d",
      "revId": "607baecc98524fa612f6ef979fedc806c04eaabf",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}